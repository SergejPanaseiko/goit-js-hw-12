{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48662828-d5228b65b3bd2a50381de04cd';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page_q) {\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 40,\n            page: page_q,\n        },\n    });\n    return response.data.hits;\n}\n\nexport async function totalHit(query) {\n    const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo`;\n    try {\n        const response = await fetch(URL);       // Очікуємо відповідь\n        const data = await response.json();      // Очікуємо перетворення в JSON\n        return data.totalHits;                   // Повертаємо значення\n    } catch (error) {\n        console.error('Ошибка запроса:', error);\n        throw error;                             // Прокидуємо помилку\n    }\n};\n\n","export function renderGallery(images) {\n    const gallery = document.querySelector('.gallery'); // Переконуємося, що елемент галереї доступний\n\n    const markup = images\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads, totalhits }) =>\n                `<a href=\"${largeImageURL}\" class=\"gallery-item\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\">\n                    <div class=\"info\">\n                        <p class=\"text\">Likes<br> <span>${likes}</span></p>\n                        <p class=\"text\">Views<br> <span>${views}</span></p>\n                        <p class=\"text\">Comments<br> <span>${comments}</span></p>\n                        <p class=\"text\">Downloads<br> <span>${downloads}</span></p>                        \n                    </div>\n                </a>`\n        )\n        .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);     \n}\n","import { fetchImages } from './js/pixabay-api';\nimport { totalHit } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions.js'\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.getElementById('loader');\nconst button_footer=document.querySelector('.butn-footer');\nlet lightbox = new SimpleLightbox('.gallery a');\n\nlet page=0;\nlet limit = 40;\nlet totalElements = 1;\nlet maxPage;\nlet query;\n\nfunction showLoader() {\n    document.getElementById('loader').classList.add('show');    \n}\nfunction hideLoader() {\ndocument.getElementById('loader').classList.remove('show');\n}\n\nhideLoader();\n//======= Натискаэмо на кнопку\nform.addEventListener('submit', async (event) => {    //Кнопка 1 --------------------------------\n    page = 0;\n    query = input.value.trim();\n    getTotalHits();\n    event.preventDefault();\n// ======= Перевіряємо заповненість input\n    if (!query) {\n        iziToast.warning({\n            title: 'Увага',\n            message: 'Будь ласка, введіть пошуковий запит!',\n        });\n        return;\n    }\n//====== Перевіряємо, чи не перевищили необхідну кількість завантажень\n   \n    gallery.innerHTML = '';\n    showLoader();\n    //Завантажуємо картинки\n    try {        \n        const images = await fetchImages(query);//----------------------------------------------\n        if (images.length === 0) {\n            iziToast.info({\n                title: 'Немає результатів',\n                message: 'Спробуйте інший пошуковий запит!',\n            });\n            return;\n        }\n        getTotalHits();\n        hideLoader();\n        renderGallery(images);//додаємо картинки\n        lightbox.refresh();//\n        button_footer.style.display = 'block';        \n        button_footer.disabled = false;        \n    } catch (error) {\n        loader.style.display = \"none\"; \n        iziToast.error({\n            title: 'Помилка',\n            message: 'Щось пішло не так! Спробуйте ще раз.',\n        });\n    } finally {\n        loader.style.display = \"none\";\n    }\n});\nhideLoader();\nconst totalPages = Math.ceil(totalElements / limit);\n\nconst continuationButton = document.getElementById('search-forms-two');\n\ncontinuationButton.addEventListener('submit', async (event) => {// Кнопка нижня -------------------------\n    event.preventDefault();\n    getTotalHits();\n    const images = await fetchImages(query, page);\n    renderGallery(images);\n    window.scrollBy({ top: window.innerHeight-100, behavior: 'smooth' });\n    lightbox.refresh();    \n    });\n\nasync function getTotalHits() {\n    try {\n        const hits = await totalHit(query); // Виклик функції із запитом\n        counter(hits);\n        } catch (error) {\n        console.error('Ошибка при получении данных:', error);\n    }\n}\n\nfunction counter(hits) {\n    maxPage = Math.ceil(hits / limit);\n    page += 1;\n    if (maxPage < page) {\n        button_footer.style.display = 'none';\n        page = 0;\n    return iziToast.error({\n        position: 'bottomCenter',\n        message: \"We're sorry, there are no more posts to load\"\n    });        \n    }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page_q","axios","totalHit","URL","error","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","totalhits","form","input","loader","button_footer","lightbox","SimpleLightbox","page","limit","maxPage","showLoader","hideLoader","event","getTotalHits","iziToast","continuationButton","hits","counter"],"mappings":"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"}